plugins() {
	id('java')
	id('maven-publish')
}

group('builderb0y')
version('4.9.6')
archivesBaseName = 'AutoCodec'

repositories() {
	mavenCentral()
	maven() {
		url('https://libraries.minecraft.net')
	}
}

dependencies() {
	compileOnly       ('com.mojang:datafixerupper:4.1.27')
	testImplementation('com.mojang:datafixerupper:4.1.27')
	compileOnly       ('org.jetbrains:annotations:23.0.0')
	testCompileOnly   ('org.jetbrains:annotations:23.0.0')
	testImplementation('junit:junit:4.13.2')
}

//I do my testing manually.
test.enabled = false

compileJava() {
	options.compilerArgs.add('-parameters')
}

java() {
	withSourcesJar()
}

//if you're reading this and trying to compile AutoCodec yourself,
//you'll probably want to remove this part.
publishing() {
	publications() {
		mavenJava(MavenPublication) {
			from(components.java)
		}
	}

	repositories() {
		mavenLocal() {
			url('file:///home/builderb0y/Documents/Projects/AutoCodec/releases')
		}
	}
}

//and this part too.
build.dependsOn(publish)